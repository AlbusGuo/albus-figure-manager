# Figure Manager for Obsidian



![Obsidian Plugin](https://img.shields.io/badge/Obsidian-Plugin-purple?logo=obsidian)
![Version](https://img.shields.io/badge/version-1.0.0-blue)

一个强大的 Obsidian 图片管理插件，帮助你轻松管理库中的所有图片资源

[English](#english) | [中文](#中文)


---

## 中文

### ✨ 核心特性

#### 🖼️ 图片浏览与管理
- **网格视图展示**：以美观的网格布局展示所有图片
- **多格式支持**：PNG、JPG、JPEG、GIF、BMP、WEBP、SVG 常见图片格式
- **自定义文件类型**：支持特殊格式，自定义设置关联封面文件
- **详细信息展示**：文件名、大小、创建时间、修改时间等信息一目了然

#### 🔍 智能引用检查
- **一键扫描**：快速扫描整个库，找出所有图片的引用情况
- **引用统计**：实时显示每张图片在笔记中的引用次数
- **引用定位**：点击即可跳转到引用该图片的具体笔记位置
- **筛选未引用**：快速找出所有未被使用的图片，轻松清理冗余资源
- **批量删除**：一键批量删除未引用图片，高效管理存储空间

#### 🛠️ 便捷文件操作
- **图片预览**：点击图片即可查看大图和详细信息
- **快速打开**：使用系统默认程序打开图片进行编辑
- **智能重命名**：重命名图片时自动更新所有笔记中的引用链接
- **安全删除**：删除文件自动移至回收站，误删可恢复
- **双击打开**：支持双击图片卡片直接打开文件（可配置）

#### 🔎 高效搜索与排序
- **实时搜索**：支持按文件名、路径搜索，快速定位目标图片
- **智能筛选**：可筛选仅显示未引用的图片
- **灵活排序**：按创建时间正序或倒序排列
- **文件夹过滤**：指定默认文件夹，只显示特定目录下的图片

#### 🎨 特殊文件支持
- **AGX 格式支持**：专为特殊格式设计，自动关联主文件和封面文件
- **同步操作**：对 AGX 文件的操作会同步影响其对应的封面文件
- **可扩展配置**：可在设置中添加更多自定义文件类型

### 📦 安装方法


1. 下载最新版本的 [Release](https://github.com/AlbusGuo/albus-figure-manager/releases)
2. 解压并将文件夹复制到你的 Obsidian 库的 `.obsidian/plugins/` 目录下
3. 重启 Obsidian
4. 在设置中启用 "Figure Manager" 插件

### 🚀 快速开始

#### 打开图片管理器

**方式一：侧边栏图标**
- 点击左侧边栏的图片图标 📷

**方式二：命令面板**
- 按 `Ctrl/Cmd + P` 打开命令面板
- 输入 "Open Figure Manager" 或 "打开图片管理器"
- 回车确认



### 💡 使用场景

#### 场景一：清理未使用的图片

你的库中积累了大量图片，想要清理那些不再使用的资源：

1. 打开 Figure Manager
2. 点击 **仅未引用** 按钮，筛选出所有未被引用的图片
3. 点击 **批量删除** 按钮，一次性删除所有未引用图片
4. 在确认对话框中查看将要删除的文件数量和详细信息
5. 确认后完成批量删除，释放存储空间

> 💡 **提示**：删除的文件会移至 Obsidian 设置的回收站，如有误删可以恢复

#### 场景二：查找某张图片的所有引用位置

你想知道某张图片在哪些笔记中被使用：

1. 在搜索框中输入图片名称
2. 点击该图片卡片打开预览窗口
3. 右侧 **引用** 栏显示所有引用该图片的笔记
4. 点击任意引用项，直接跳转到对应笔记位置

#### 场景三：批量重命名规范图片名称

你需要规范图片命名，统一命名风格：

1. 浏览图片列表，找到需要重命名的图片
2. 点击图片卡片上的 **✏️ 重命名** 按钮
3. 输入新的文件名（无需输入扩展名）
4. 插件会自动更新所有笔记中对该图片的引用

> 💡 **提示**：Obsidian 的自动链接更新功能会确保引用不会失效

#### 场景四：快速编辑图片工程文件并导出

你需要快速打开某张图片进行编辑：

1. 在设置中配置好工程文件及其导出封面的类型，并配置打开方式为外部打开
1. 在 Figure Manager 中找到目标图片
2. 点击 **📂 打开** 按钮
3. 图片会使用系统默认程序打开
4. 编辑保存后，Obsidian 中的图片会自动更新
5. 封面图片需要重新导出覆盖

> 比如这很适合将 Excalidraw 图像导出使用的用户

### ⚙️ 设置选项

在 Obsidian 设置中找到 **Figure Manager** 配置项：

#### 显示设置
- **显示文件大小**：在图片卡片上显示文件大小
- **显示修改时间**：在图片卡片上显示最后修改时间
- **自动检查引用**：打开管理器时自动扫描引用情况
- **默认筛选未引用图片**：默认只显示未被引用的图片

#### 行为设置
- **删除前确认**：删除文件前显示确认对话框，避免误删

#### 文件夹设置
- **默认文件夹**：设置默认显示的图片文件夹路径（为空则显示所有文件夹）

#### 自定义文件类型
- **添加特殊格式**：可以添加自定义文件类型（如 AGX）
  - 文件扩展名：主文件的扩展名
  - 封面扩展名：用作缩略图的封面文件扩展名
  - 封面文件夹：封面文件所在的相对路径
- **头文件打开方式**：拖动设置不同文件的打开方式——在 Obsidian 打开或用系统默认应用打开
、

#### 自定义文件类型配置

对于特殊的图片格式（如游戏资源、设计稿等），可以配置自定义文件类型：

**示例：配置 AGX 格式**
- 文件扩展名：`agx`
- 封面扩展名：`svg`
- 封面文件夹：`covers`（相对于 Obsidian 库的路径）

这样配置后：
- 系统会自动关联 `example.agx` 和 `covers/example.svg`
- 缩略图显示 SVG 封面
- 重命名时对两个文件同时生效
- 删除时会同时删除两个文件
- 引用检查基于 SVG 文件

### 📊 性能与优化

- **引用缓存**：引用检查结果会被缓存，避免重复扫描
- **懒加载**：图片采用懒加载技术，只加载可见区域的图片
- **增量更新**：文件修改后只更新受影响的缓存
- **智能限流**：搜索和筛选操作自动防抖，避免性能问题

### 🐛 常见问题

#### Q: 引用检查需要多长时间？
A: 取决于你的库大小，通常几秒到十几秒。结果会被缓存，后续查看无需重新扫描。

#### Q: 删除的文件可以恢复吗？
A: 可以。删除的文件会移至 Obsidian 配置的系统回收站，可以从回收站恢复。

#### Q: 重命名会影响笔记中的引用吗？
A: 不会。Obsidian 会自动更新所有笔记中的引用链接。

#### Q: 支持哪些图片格式？
A: 默认支持 PNG、JPG、JPEG、GIF、BMP、WEBP、SVG。可在设置中添加自定义格式。

#### Q: 图片很多时会卡顿吗？
A: 插件采用了懒加载和虚拟滚动优化，即使数千张图片也能流畅运行。


### 🤝 贡献

欢迎提交 Issue 和 Pull Request！

- [报告 Bug](https://github.com/AlbusGuo/albus-figure-manager/issues)
- [功能建议](https://github.com/AlbusGuo/albus-figure-manager/issues)
- [贡献指南](./CONTRIBUTING.md)